---
interface Props {
	title: string;
	description?: string;
	canonical?: string;
	hideLeadForm?: boolean; // Option to hide the GoHighLevel form on specific pages
}

const { title, description = "Hero House Cleaning - Professional house cleaning services in Knoxville, TN. 4.8 stars, eco-friendly products, satisfaction guaranteed.", canonical, hideLeadForm = false } = Astro.props;

// Get the canonical URL - use provided canonical or construct from current URL
const canonicalURL = canonical || new URL(Astro.url.pathname, Astro.site || 'https://herohousecleaning.com').href;

// Determine if we should show the lead form based on the current page
const currentPath = Astro.url.pathname;
const showLeadForm = !hideLeadForm &&
	currentPath !== '/contact' &&
	currentPath !== '/about';
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>

		<!-- Google Fonts - Inter -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

		<!-- Canonical URL -->
		<link rel="canonical" href={canonicalURL} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonicalURL} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content="https://herohousecleaning.com/og-image.jpg" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={canonicalURL} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content="https://herohousecleaning.com/og-image.jpg" />
	</head>
	<body>
		<!-- Skip to Main Content Link for Accessibility -->
		<a href="#main-content" class="skip-to-main">Skip to main content</a>

		<header>
			<nav>
				<div class="nav-container">
					<a href="/" class="logo">Hero House Cleaning</a>

					<!-- Mobile Menu Toggle -->
					<button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
						<span class="hamburger"></span>
					</button>

					<!-- Navigation Links -->
					<ul class="nav-links">
						<li><a href="tel:865-507-1405" class="phone-link">üìû (865) 507-1405</a></li>
						<li><a href="/">Home</a></li>
						<li><a href="/services">Services</a></li>
						<li><a href="/locations">Locations</a></li>
						<li><a href="/about">About</a></li>
						<li><a href="/contact" class="btn-primary">Get Free Quote</a></li>
					</ul>
				</div>
			</nav>
		</header>

		<!-- Sticky Mobile CTA Bar -->
		<div class="sticky-mobile-cta">
			<a href="tel:865-507-1405" class="sticky-cta-phone">
				<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
					<path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
				</svg>
				Call Now
			</a>
			<a href="/contact" class="sticky-cta-quote">Get Free Quote</a>
		</div>
		<main id="main-content">
			<slot />
		</main>
		<footer>
			<div class="footer-container">
				<div class="footer-section">
					<h3>Hero House Cleaning</h3>
					<p>Knoxville's most trusted house cleaning service. Family-owned, eco-friendly, and backed by our satisfaction guarantee.</p>
					<p class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8 Stars (175+ Reviews)</p>
				</div>
				<div class="footer-section">
					<h3>Quick Links</h3>
					<ul>
						<li><a href="/services">Services</a></li>
						<li><a href="/locations">Locations</a></li>
						<li><a href="/about">About Us</a></li>
						<li><a href="/contact">Contact</a></li>
					</ul>
				</div>
				<div class="footer-section">
					<h3>Contact</h3>
					<p>Knoxville, TN & Surrounding Areas</p>
					<p>Phone: <a href="tel:865-507-1405">(865) 507-1405</a></p>
					<p>Email: <a href="mailto:info@herohousecleaning.com">info@herohousecleaning.com</a></p>
					<p>Hours: Mon-Fri 8AM-5PM</p>
				</div>
			</div>
			<div class="footer-bottom">
				<p>&copy; {new Date().getFullYear()} Hero House Cleaning. All rights reserved.</p>
			</div>
		</footer>

		<!-- GoHighLevel Sticky Sidebar Form -->
		{showLeadForm && (
			<>
				<iframe
					src="https://api.leadconnectorhq.com/widget/form/reMQTa2Yzj0ivR84Qxdg"
					style="display:none;width:100%;height:100%;border:none;border-radius:8px"
					id="sticky-sidebar-left-reMQTa2Yzj0ivR84Qxdg"
					data-layout="{'id':'STICKY_SIDEBAR','minimizedTitle':'Submit Your Estimate','isLeftAligned':true,'isRightAligned':false,'allowMinimize':true}"
					data-trigger-type="alwaysShow"
					data-trigger-value=""
					data-activation-type="alwaysActivated"
					data-activation-value=""
					data-deactivation-type="neverDeactivate"
					data-deactivation-value=""
					data-form-name="Estimate Form + Discount Offer"
					data-height="undefined"
					data-layout-iframe-id="sticky-sidebar-left-reMQTa2Yzj0ivR84Qxdg"
					data-form-id="reMQTa2Yzj0ivR84Qxdg"
					title="Estimate Form + Discount Offer"
				>
				</iframe>
				<script src="https://link.msgsndr.com/js/form_embed.js"></script>
			</>
		)}

		<!-- GoHighLevel Chatbot (Bottom Right) -->
		<script
			src="https://beta.leadconnectorhq.com/loader.js"
			data-resources-url="https://beta.leadconnectorhq.com/chat-widget/loader.js"
			data-widget-id="66fc26c6b7cd64b8a0fadf9a"
		></script>
	</body>
</html>
<style is:global>
	:root {
		/* Hero Design System - Brand Colors */
		--color-brand-red: #BC1823;
		--color-brand-navy: #171b3e;
		--color-brand-white: #ffffff;

		/* Primary Red Scale */
		--color-red-50: #fef2f2;
		--color-red-100: #fee2e2;
		--color-red-500: #ef4444;
		--color-red-600: #dc2626;
		--color-red-700: #b91c1c;
		--color-red-brand: #BC1823;

		/* Navy/Blue Scale */
		--color-blue-600: #2563eb;
		--color-blue-700: #1d4ed8;
		--color-blue-800: #1e40af;
		--color-blue-brand: #171b3e;

		/* Neutral System - Cool-toned */
		--color-white: #ffffff;
		--color-gray-50: #f8fafc;
		--color-gray-100: #f1f5f9;
		--color-gray-200: #e2e8f0;
		--color-gray-300: #cbd5e1;
		--color-gray-400: #94a3b8;
		--color-gray-500: #64748b;
		--color-gray-600: #475569;
		--color-gray-700: #334155;
		--color-gray-800: #1e293b;
		--color-gray-900: #0f172a;

		/* Semantic Colors */
		--color-success: #22c55e;
		--color-warning: #f59e0b;
		--color-error: #ef4444;
		--color-info: #3b82f6;

		/* Background Variations */
		--color-bg-primary: #ffffff;
		--color-bg-secondary: #f8fafc;
		--color-bg-tertiary: #f1f5f9;

		/* Text Colors */
		--color-text-primary: #0f172a;
		--color-text-secondary: #475569;
		--color-text-tertiary: #64748b;
		--color-text-inverse: #ffffff;
		--color-text-brand: #171b3e;
		--color-text-accent: #BC1823;

		/* Legacy Mapping for Compatibility */
		--primary: var(--color-brand-red);
		--primary-dark: #991517;
		--secondary: var(--color-brand-navy);
		--text: var(--color-text-primary);
		--text-light: var(--color-text-secondary);
		--bg: var(--color-bg-primary);
		--bg-light: var(--color-bg-secondary);
		--border: var(--color-gray-200);
	}

	* {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	body {
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
		line-height: 1.6;
		color: var(--text);
		background: var(--bg);
	}

	/* Global Focus Indicators for WCAG AA Compliance */
	a:focus,
	button:focus,
	input:focus,
	select:focus,
	textarea:focus,
	.btn:focus,
	.btn-primary:focus,
	.btn-secondary:focus {
		outline: 3px solid var(--primary);
		outline-offset: 2px;
	}

	a:focus-visible,
	button:focus-visible,
	input:focus-visible,
	select:focus-visible,
	textarea:focus-visible {
		outline: 3px solid var(--primary);
		outline-offset: 2px;
	}

	/* Skip to Main Content Link for Accessibility */
	.skip-to-main {
		position: absolute;
		top: -40px;
		left: 0;
		background: var(--primary);
		color: white;
		padding: 0.5rem 1rem;
		text-decoration: none;
		z-index: 200;
		font-weight: 600;
		border-radius: 0 0 4px 0;
	}

	.skip-to-main:focus {
		top: 0;
		outline: 3px solid var(--primary-dark);
		outline-offset: 2px;
	}

	header {
		background: white;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
		position: sticky;
		top: 0;
		z-index: 100;
	}

	.nav-container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 1rem 2rem;
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.logo {
		font-size: 1.5rem;
		font-weight: bold;
		color: var(--primary);
		text-decoration: none;
	}

	.nav-links {
		display: flex;
		gap: 2rem;
		list-style: none;
		align-items: center;
	}

	.nav-links a {
		text-decoration: none;
		color: var(--text);
		font-weight: 500;
		transition: color 0.3s;
	}

	.nav-links a:hover {
		color: var(--primary);
	}

	.phone-link {
		color: var(--primary) !important;
		font-weight: 600 !important;
	}

	.btn-primary {
		background: var(--primary);
		color: white !important;
		padding: 0.5rem 1.5rem;
		border-radius: 0.5rem;
		transition: background 0.3s;
	}

	.btn-primary:hover {
		background: var(--primary-dark) !important;
	}

	main {
		min-height: calc(100vh - 200px);
	}

	footer {
		background: var(--text);
		color: white;
		padding: 3rem 2rem 1rem;
		margin-top: 4rem;
	}

	.footer-container {
		max-width: 1200px;
		margin: 0 auto;
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
		margin-bottom: 2rem;
	}

	.footer-section h3 {
		margin-bottom: 1rem;
		color: var(--secondary);
	}

	.footer-section ul {
		list-style: none;
	}

	.footer-section ul li {
		margin-bottom: 0.5rem;
	}

	.footer-section a {
		color: #d1d5db;
		text-decoration: none;
		transition: color 0.3s;
	}

	.footer-section a:hover {
		color: white;
	}

	.rating {
		color: #fbbf24 !important;
		font-weight: 600;
		margin-top: 0.5rem;
	}

	.footer-bottom {
		text-align: center;
		padding-top: 2rem;
		border-top: 1px solid #374151;
		color: #9ca3af;
	}

	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 2rem;
	}

	h1 {
		font-size: 2.5rem;
		margin-bottom: 1rem;
		color: var(--text);
	}

	h2 {
		font-size: 2rem;
		margin-bottom: 1rem;
		color: var(--text);
	}

	h3 {
		font-size: 1.5rem;
		margin-bottom: 0.5rem;
	}

	p {
		margin-bottom: 1rem;
		color: var(--text-light);
	}

	/* Mobile Menu Toggle Button */
	.mobile-menu-toggle {
		display: none;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		z-index: 101;
	}

	.hamburger,
	.hamburger::before,
	.hamburger::after {
		display: block;
		width: 28px;
		height: 3px;
		background: var(--primary);
		border-radius: 3px;
		transition: all 0.3s ease;
	}

	.hamburger::before,
	.hamburger::after {
		content: '';
		position: absolute;
	}

	.hamburger::before {
		transform: translateY(-8px);
	}

	.hamburger::after {
		transform: translateY(8px);
	}

	.mobile-menu-toggle[aria-expanded="true"] .hamburger {
		background: transparent;
	}

	.mobile-menu-toggle[aria-expanded="true"] .hamburger::before {
		transform: rotate(45deg);
	}

	.mobile-menu-toggle[aria-expanded="true"] .hamburger::after {
		transform: rotate(-45deg);
	}

	/* Sticky Mobile CTA Bar */
	.sticky-mobile-cta {
		display: none;
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: white;
		box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
		padding: 0.75rem 1rem;
		gap: 0.75rem;
		z-index: 99;
		border-top: 2px solid var(--primary);
	}

	.sticky-cta-phone,
	.sticky-cta-quote {
		flex: 1;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 0.5rem;
		padding: 0.875rem 1rem;
		border-radius: 0.5rem;
		text-decoration: none;
		font-weight: 600;
		font-size: 0.95rem;
		transition: all 0.3s;
		min-height: 48px;
	}

	.sticky-cta-phone {
		background: white;
		color: var(--primary);
		border: 2px solid var(--primary);
	}

	.sticky-cta-phone:hover {
		background: var(--primary);
		color: white;
	}

	.sticky-cta-phone svg {
		width: 20px;
		height: 20px;
	}

	.sticky-cta-quote {
		background: var(--primary);
		color: white;
		border: 2px solid var(--primary);
	}

	.sticky-cta-quote:hover {
		background: var(--primary-dark);
		border-color: var(--primary-dark);
		transform: translateY(-2px);
	}

	@media (max-width: 768px) {
		/* Show mobile menu toggle */
		.mobile-menu-toggle {
			display: block;
			position: relative;
		}

		/* Hide nav links by default on mobile */
		.nav-links {
			position: fixed;
			top: 73px;
			left: 0;
			right: 0;
			background: white;
			flex-direction: column;
			gap: 0;
			padding: 1rem 0;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transform: translateY(-100%);
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
		}

		/* Show nav links when menu is open */
		.nav-links.mobile-menu-open {
			transform: translateY(0);
			opacity: 1;
			visibility: visible;
		}

		.nav-links li {
			width: 100%;
			text-align: center;
			border-bottom: 1px solid var(--border);
		}

		.nav-links li:last-child {
			border-bottom: none;
		}

		.nav-links a {
			display: block;
			padding: 1rem 2rem;
			width: 100%;
		}

		.nav-links .btn-primary {
			margin: 0.5rem 1rem;
			width: calc(100% - 2rem);
			display: block;
		}

		/* Show sticky mobile CTA */
		.sticky-mobile-cta {
			display: flex;
		}

		/* Add padding to main content to account for sticky CTA */
		main {
			padding-bottom: 80px;
		}

		.container {
			padding: 1rem;
		}

		h1 {
			font-size: 2rem;
		}

		h2 {
			font-size: 1.5rem;
		}
	}

	@media (min-width: 769px) {
		/* Ensure desktop nav is always visible */
		.nav-links {
			display: flex !important;
		}
	}
</style>

<script>
	// Mobile menu toggle functionality
	const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
	const navLinks = document.querySelector('.nav-links');

	if (mobileMenuToggle && navLinks) {
		mobileMenuToggle.addEventListener('click', () => {
			const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
			mobileMenuToggle.setAttribute('aria-expanded', (!isExpanded).toString());
			navLinks.classList.toggle('mobile-menu-open');
		});

		// Close mobile menu when clicking a link
		navLinks.querySelectorAll('a').forEach(link => {
			link.addEventListener('click', () => {
				mobileMenuToggle.setAttribute('aria-expanded', 'false');
				navLinks.classList.remove('mobile-menu-open');
			});
		});

		// Close mobile menu when clicking outside
		document.addEventListener('click', (e) => {
			if (!mobileMenuToggle.contains(e.target as Node) && !navLinks.contains(e.target as Node)) {
				mobileMenuToggle.setAttribute('aria-expanded', 'false');
				navLinks.classList.remove('mobile-menu-open');
			}
		});
	}
</script>
